<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ThingsBoard JS SDK Test</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ”Œ ThingsBoard JS SDK Test</h1>
            <p class="subtitle">Test your ThingsBoard connection and API calls</p>
        </header>

        <div class="main-layout">
            <div class="left-column">
                <div class="card">
            <h2>Configuration</h2>
            <div class="config-display">
                <div class="config-item">
                    <span class="label">Host:</span>
                    <span id="hostDisplay" class="value">Not configured</span>
                </div>
                <div class="config-item">
                    <span class="label">Status:</span>
                    <span id="connectionStatus" class="value status-disconnected">Disconnected</span>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Authentication</h2>
            <div class="form-group">
                <label for="username">Username:</label>
                <input type="text" id="username" placeholder="Enter username">
            </div>
            <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" id="password" placeholder="Enter password">
            </div>
            <button id="connectBtn" class="btn btn-primary">Connect</button>
            <button id="disconnectBtn" class="btn btn-secondary" disabled>Disconnect</button>
        </div>

        <div class="card">
            <h2>Get Tenant Devices</h2>
            <div class="form-row">
                <div class="form-group">
                    <label for="pageSize">Page Size:</label>
                    <input type="number" id="pageSize" value="10" min="1" max="100">
                </div>
                <div class="form-group">
                    <label for="page">Page:</label>
                    <input type="number" id="page" value="0" min="0">
                </div>
            </div>
            <button id="getDevicesBtn" class="btn btn-primary" disabled>Get Devices</button>
        </div>

        <div class="card">
            <h2>Device Operations</h2>
            <div class="form-group">
                <label for="deviceId">Device ID:</label>
                <input type="text" id="deviceId" placeholder="Enter device ID">
            </div>
            
            <div class="button-group">
                <button id="getDeviceInfoBtn" class="btn btn-primary" disabled>Get Device Info</button>
                <button id="getKeysBtn" class="btn btn-primary" disabled>Get Timeseries Keys</button>
                <button id="getAttributesBtn" class="btn btn-primary" disabled>Get Attributes</button>
                <button id="getTimeseriesBtn" class="btn btn-primary" disabled>Get Timeseries Data</button>
                <button id="subscribeBtn" class="btn btn-primary" disabled>Subscribe (WebSocket)</button>
            </div>
        </div>

        <div class="card">
            <h2>Dashboard Operations</h2>
            <div class="form-row">
                <div class="form-group">
                    <label for="dashboardPageSize">Page Size:</label>
                    <input type="number" id="dashboardPageSize" value="10" min="1" max="100">
                </div>
                <div class="form-group">
                    <label for="dashboardPage">Page:</label>
                    <input type="number" id="dashboardPage" value="0" min="0">
                </div>
            </div>
            <button id="getDashboardsBtn" class="btn btn-primary" disabled>Get Dashboards</button>
            
            <div class="form-group" style="margin-top: 15px;">
                <label for="dashboardId">Dashboard ID:</label>
                <input type="text" id="dashboardId" placeholder="Enter dashboard ID">
            </div>
            <div class="button-group">
                <button id="getDashboardInfoBtn" class="btn btn-primary" disabled>Get Dashboard Info</button>
                <button id="makePublicBtn" class="btn btn-primary" disabled>Make Public</button>
                <button id="removePublicBtn" class="btn btn-primary" disabled>Remove Public</button>
                <button id="getPublicLinkBtn" class="btn btn-primary" disabled>Get Public Link</button>
            </div>

            <div class="form-group" style="margin-top: 15px;">
                <label for="publicDashboardId">Public Dashboard ID:</label>
                <input type="text" id="publicDashboardId" placeholder="Enter public dashboard ID">
            </div>
            <button id="getPublicDashboardInfoBtn" class="btn btn-secondary">Get Public Dashboard Info (No Auth)</button>
        </div>

        <div class="card">
            <h2>User Operations</h2>
            <div class="button-group">
                <button id="getUserInfoBtn" class="btn btn-primary" disabled>Get Current User Info</button>
                <button id="getCustomerUsersBtn" class="btn btn-primary" disabled>Get Customer Users</button>
            </div>
        </div>
            </div>

            <div class="right-column">
                <div class="card sticky-card">
                    <h2>Response</h2>
                    <div class="response-container">
                        <pre id="responseOutput">No response yet...</pre>
                    </div>
                    <button id="clearBtn" class="btn btn-secondary">Clear</button>
                </div>

                <div class="card sticky-card">
                    <h2>WebSocket Messages</h2>
                    <div class="response-container">
                        <pre id="wsOutput">No WebSocket messages yet...</pre>
                    </div>
                    <button id="clearWsBtn" class="btn btn-secondary">Clear</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Dashboard Preview -->
    <div id="dashboardModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Dashboard Preview</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <iframe id="dashboardFrame" src="" frameborder="0"></iframe>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@0.21.1/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jwt-decode@3.1.2/build/jwt-decode.min.js"></script>
    <script src="tbClient.js"></script>
    <script src="app.js"></script>
</body>
</html>
